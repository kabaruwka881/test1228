cmake_minimum_required(VERSION 3.16)
project(MyList LANGUAGES CXX) 

set(HEADERS MyList.hpp)
set(SOURCES MyList.cpp)

add_library(${PROJECT_NAME} SHARED ${HEADERS} ${SOURCES})

set_target_properties(${PROJECT_NAME} PROPERTIES PUBLIC_HEADER ${HEADERS})


set(INSTALL_LIBDIR /usr/local/lib)
set(INSTALL_BINDIR /usr/local/bin)
set(INSTALL_INCLUDEDIR /usr/local/include)
set(CMAKE_SHARED_LIBRARY_SUFFIX ".so")

message("CMAKE_INSTALL_LIBDIR: ${CMAKE_INSTALL_LIBDIR}\n")
message("CMAKE_INSTALL_BINDIR: ${CMAKE_INSTALL_BINDIR}\n")
message("CMAKE_INSTALL_INCLUDEDIR: ${CMAKE_INSTALL_INCLUDEDIR}\n")

install(TARGETS ${PROJECT_NAME}
	 EXPORT "${PROJECT_NAME}-config"
        RUNTIME DESTINATION "${INSTALL_BINDIR}"
        LIBRARY DESTINATION "${INSTALL_LIBDIR}/${PROJECT_NAME}"
        ARCHIVE DESTINATION "${INSTALL_LIBDIR}/${PROJECT_NAME}"
        PUBLIC_HEADER DESTINATION "${INSTALL_INCLUDEDIR}/${PROJECT_NAME}"
        PRIVATE_HEADER DESTINATION "${INSTALL_INCLUDEDIR}/${PROJECT_NAME}"
        INCLUDES DESTINATION "${INSTALL_INCLUDEDIR}/${PROJECT_NAME}")

install(EXPORT "${PROJECT_NAME}-config" DESTINATION "${INSTALL_LIBDIR}/cmake/${PROJECT_NAME}")

export(TARGETS ${PROJECT_NAME} FILE "${PROJECT_NAME}-exports.cmake")